# 実装方針（技術アプローチ）

## 1. 参照層の集約
- includes/repository ディレクトリを新設し、データ取得関数を集約（UI/ロジック共通の参照点）
- 例: get_room_rates(room_id), get_active_campaigns(checkin_date), get_options()

## 2. 料金計算の入力統一
- monthly_rates を第一参照
- 未設定・無効/期間外の場合のみ default_price をフォールバック
- 計算順序: 基本料金 → 人数追加 → オプション → キャンペーン → 税

## 3. キャンペーン参照統一
- monthly_campaigns を正とし、campaign_name/description/discount_type/value を標準フィールドとする
- booking-logic/campaign-manager の参照先と名称を統一（段階的移行）

## 4. 整合性ダッシュボード（将来）
- 管理画面サブメニューとして read-only の集計/警告を表示
- SQL + 軽いSELECTのみで構成、CSVダウンロード機能を付与

## 5. セーフティ
- すべての変更は別PRで段階投入
- 既存関数はラッパーで旧仕様互換を確保し、非推奨化アノテーションで段階廃止
